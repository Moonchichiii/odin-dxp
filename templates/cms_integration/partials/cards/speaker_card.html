{% load cloudinary_helper wagtailimages_tags %}

<div class="group relative bg-white/[0.02] border border-odin-border rounded-xl overflow-hidden hover:border-primary/50 transition-all duration-300">
  <div class="aspect-square w-full overflow-hidden bg-odin-bg">

    {% if speaker.photo_upload %}
      {% image speaker.photo_upload fill-400x400 class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110 grayscale group-hover:grayscale-0" alt=speaker.name loading="lazy" decoding="async" %}

    {% elif speaker.photo_public_id %}
      <img
        src="{% cld_img speaker.photo_public_id width=400 height=400 gravity='face' %}"
        alt="{{ speaker.name }}"
        class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110 grayscale group-hover:grayscale-0"
        loading="lazy"
        decoding="async"
      />
    {% else %}
      <div class="h-full w-full flex items-center justify-center text-text-muted text-xs">
        No image
      </div>
    {% endif %}
  </div>

  <div class="p-4 relative">
    <div class="absolute top-0 left-0 w-full h-px bg-linear-to-r from-transparent via-primary/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>

    <h3 class="font-display text-lg font-bold text-white leading-tight mb-1">{{ speaker.name }}</h3>
    <p class="text-xs font-mono uppercase tracking-wider text-primary mb-1">{{ speaker.company }}</p>
    <p class="text-xs text-text-muted line-clamp-2">{{ speaker.role }}</p>

    {% if speaker.linkedin_url %}
      <a
        href="{{ speaker.linkedin_url }}"
        target="_blank"
        rel="noopener"
        class="mt-3 inline-flex items-center text-xs font-semibold text-text-muted hover:text-primary transition-colors"
      >
        LinkedIn &rarr;
      </a>
    {% endif %}
  </div>
</div>
